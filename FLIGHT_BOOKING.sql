CREATE TABLE airport( 
apt_id		CHAR(3),
apt_name	VARCHAR2(30)		NOT NULL,
CONSTRAINT airport_pk PRIMARY KEY (apt_id)
);

CREATE TABLE route (
	route_name 		CHAR(5),
	route_path 		VARCHAR2(30) 		NOT NULL,
    dow 			VARCHAR2(30) 		NOT NULL,
    total_time 		INTEGER      		NOT NULL,
CONSTRAINT route_pk PRIMARY KEY (route_name),
CONSTRAINT check_total_time CHECK (total_time >0)
);

CREATE TABLE route_detail (
	route_name		    CHAR(5),
	apt_id 			    CHAR(3),
	transit 			INTEGER        		NOT NULL,
	arrival_time 		VARCHAR2(10),
	departure_time 		VARCHAR2(10),
	CONSTRAINT route_detail_pk PRIMARY KEY (route_name, apt_id),
	CONSTRAINT route_detail_fk1 FOREIGN KEY(route_name) REFERENCES route(route_name) ON DELETE CASCADE,
    CONSTRAINT route_detail_fk2 FOREIGN KEY(apt_id) REFERENCES airport(apt_id) ON DELETE SET NULL
);

CREATE TABLE flight (
fl_id			VARCHAR2(10),
fl_date			DATE        		NOT NULL,
route_name		CHAR(5) 		    NOT NULL,
alp_id			CHAR(6)		        NOT NULL,
CONSTRAINT flight_pk PRIMARY KEY (fl_id),
CONSTRAINT flight_fk1 FOREIGN KEY(route_name) REFERENCES route(route_name) ON DELETE SET NULL,
CONSTRAINT flight_fk2 FOREIGN KEY(alp_id) REFERENCES airplane(alp_id) ON DELETE SET NULL
);

CREATE TABLE airplane (
	alp_id 			CHAR(6),
	alp_name 		VARCHAR2(10) 		NOT NULL,
    alp_model		VARCHAR2(5)			NOT NULL,
    alp_totalseat 	INTEGER			    NOT NULL,
    first_seat 		INTEGER,			    
    business_seat 	INTEGER,
    Economy_seat 	INTEGER,
    alp_status 		VARCHAR2(20) 		NOT NULL,
    CONSTRAINT airplane_pk PRIMARY KEY (alp_id)
);

CREATE TABLE passenger (
	pas_id 			VARCHAR2(10),
	pas_idcard		INTEGER		    DEFAULT NULL,
	pas_fname 		VARCHAR2(20) 		NOT NULL,
	pas_lname 		VARCHAR2(20) 		NOT NULL,
	pas_dob 		VARCHAR2(20) 	    NOT NULL,
	pas_phone_num 	VARCHAR2(15) 	    NOT NULL,
	CONSTRAINT passenger_pk PRIMARY KEY (pas_id)
);

CREATE TABLE ticket(
    pas_id		    VARCHAR2(10),	
    fl_id		    VARCHAR2(10),	
    ticket_price	NUMBER(10,2) 	    NOT NULL,
    Seat_num	    VARCHAR2(5)		    NOT NULL,
    class_type	    VARCHAR2(10)		NOT NULL,
    CONSTRAINT ticket_pk PRIMARY KEY(pas_id, fl_id),
    CONSTRAINT ticket_fk1 FOREIGN KEY(pas_id) REFERENCES passenger (pas_id) ON DELETE SET NULL,
    CONSTRAINT ticket_fk2 FOREIGN KEY(fl_id) REFERENCES flight (fl_id) ON DELETE SET NULL
);

INSERT ALL
INTO AIRPORT VALUES ('BKK', 'Suvarnabhumi')
INTO AIRPORT VALUES ('DNM', 'Don Mueang')
INTO AIRPORT VALUES ('CNX', 'Chiangmai')
INTO AIRPORT VALUES ('HKT', 'Phuket')
INTO AIRPORT VALUES ('LAX', 'Los Angeles')
INTO AIRPORT VALUES ('NRT', 'Narita')
INTO AIRPORT VALUES ('DXB', 'Dubai')
SELECT * FROM dual;

INSERT ALL
INTO ROUTE VALUES ('AB100', 'BKK-NRT', 'mon/sat/sun', 375)
INTO ROUTE VALUES ('AB101', 'NRT-BKK', 'mon/sat/sun', 375)
INTO ROUTE VALUES ('AB200', 'BKK-NRT-LAX', 'tue/thu/sat', 1290)
INTO ROUTE VALUES ('AB201', 'LAX-NRT-BKK', 'wed/fri/sun', 1290)
INTO ROUTE VALUES ('AB300', 'BKK-LAX', 'mon/fri', 1005)
INTO ROUTE VALUES ('AB301', 'LAX-BKK', 'tue/sat', 1005)
INTO ROUTE VALUES ('AB400', 'DNM-CNX', 'mon/sat/sun', 70)
INTO ROUTE VALUES ('AB401', 'CNX-DNM', 'mon/sat/sun', 70)
INTO ROUTE VALUES ('AB500', 'CNX-HKT', 'mon/wed/fri', 130)
INTO ROUTE VALUES ('AB501', 'HKT-CNX', 'mon/wed/fri', 130)
INTO ROUTE VALUES ('AB600', 'DNM-HKT', 'mon/thu', 85)
INTO ROUTE VALUES ('AB601', 'HKT-DNM', 'mon/thu', 85)
INTO ROUTE VALUES ('AB700', 'BKK-DXB', 'wed/sat', 375)
INTO ROUTE VALUES ('AB701', 'DXB-BKK', 'thu/sun', 375)
INTO ROUTE VALUES ('AB800', 'BKK-DXB-LAX', 'mon/thu', 1534)
INTO ROUTE VALUES ('AB801', 'LAX-DXB-BKK', 'tue/fri', 1534)
SELECT * FROM dual;

INSERT ALL
INTO ROUTE_DETAIL VALUES ('AB100', 'BKK', 1, NULL, '10:55')
INTO ROUTE_DETAIL VALUES ('AB100', 'NRT', 2, '17:10', NULL)
INTO ROUTE_DETAIL VALUES ('AB101', 'NRT', 1, NULL, '20:15')
INTO ROUTE_DETAIL VALUES ('AB101', 'BKK', 2, '02:30(+1)', NULL)
INTO ROUTE_DETAIL VALUES ('AB200', 'BKK', 1, NULL, '00:15')
INTO ROUTE_DETAIL VALUES ('AB200', 'NRT', 2, '06:30', '12:12')
INTO ROUTE_DETAIL VALUES ('AB200', 'LAX', 3, '21:45', NULL)
INTO ROUTE_DETAIL VALUES ('AB201', 'LAX', 1, NULL, '00:15')
INTO ROUTE_DETAIL VALUES ('AB201', 'NRT', 2, '09:33', '15:30')
INTO ROUTE_DETAIL VALUES ('AB201', 'BKK', 3, '21:45', NULL)
INTO ROUTE_DETAIL VALUES ('AB300', 'BKK', 1, NULL, '10:20')
INTO ROUTE_DETAIL VALUES ('AB300', 'LAX', 2, '03:05(+1)', NULL)
INTO ROUTE_DETAIL VALUES ('AB301', 'LAX', 1, NULL, '19:25')
INTO ROUTE_DETAIL VALUES ('AB301', 'BKK', 2, '12:10(+1)', NULL)
INTO ROUTE_DETAIL VALUES ('AB400', 'DNM', 1, NULL, '07:50')
INTO ROUTE_DETAIL VALUES ('AB400', 'CNX', 2, '09:00', NULL)
INTO ROUTE_DETAIL VALUES ('AB401', 'CNX', 1, NULL, '16:30')
INTO ROUTE_DETAIL VALUES ('AB401', 'DNM', 2, '17:40', NULL)
INTO ROUTE_DETAIL VALUES ('AB500', 'CNX', 1, NULL, '06:30')
INTO ROUTE_DETAIL VALUES ('AB500', 'HKT', 2, '08:40', NULL)
INTO ROUTE_DETAIL VALUES ('AB501', 'HKT', 1, NULL, '21:15')
INTO ROUTE_DETAIL VALUES ('AB501', 'CNX', 2, '23:25', NULL)
INTO ROUTE_DETAIL VALUES ('AB600', 'DNM', 1, NULL, '12:28')
INTO ROUTE_DETAIL VALUES ('AB600', 'HKT', 2, '13:53', NULL)
INTO ROUTE_DETAIL VALUES ('AB601', 'HKT', 1, NULL, '18:15')
INTO ROUTE_DETAIL VALUES ('AB601', 'DNM', 2, '19:40', NULL)
INTO ROUTE_DETAIL VALUES ('AB700', 'BKK', 1, NULL, '18:05')
INTO ROUTE_DETAIL VALUES ('AB700', 'DXB', 2, '00:20(+1)', NULL)
INTO ROUTE_DETAIL VALUES ('AB701', 'DXB', 1, NULL, '04:30')
INTO ROUTE_DETAIL VALUES ('AB701', 'BKK', 2, '10:45', NULL)
INTO ROUTE_DETAIL VALUES ('AB800', 'BKK', 1, NULL, '09:45')
INTO ROUTE_DETAIL VALUES ('AB800', 'DXB', 2, '16:00', '20:14')
INTO ROUTE_DETAIL VALUES ('AB800', 'LAX', 3, '02:19(+1)', NULL)
INTO ROUTE_DETAIL VALUES ('AB801', 'LAX', 1, NULL, '04:12')
INTO ROUTE_DETAIL VALUES ('AB801', 'DXB', 2, '19:17', '23:31')
INTO ROUTE_DETAIL VALUES ('AB801', 'BKK', 3, '05:46(+1)', NULL)
SELECT * FROM dual;

INSERT ALL
INTO AIRPLANE VALUES ('ALP01', 'AIRBUS', 'A300', 210, 10, 20, 180, 'Available')
INTO AIRPLANE VALUES ('ALP02', 'AIRBUS', 'A301', 220, 10, 30, 180, 'Available')
INTO AIRPLANE VALUES ('ALP03', 'AIRBUS', 'A302', 180, NULL, 30, 150, 'Available')
INTO AIRPLANE VALUES ('ALP04', 'BOEING', 'B300', 245, 30, 25, 190, 'Available')
INTO AIRPLANE VALUES ('ALP05', 'BOEING', 'B301', 350, 20, 30, 300, 'Available')
INTO AIRPLANE VALUES ('ALP06', 'BOEING', 'B302', 375, 35, 40, 300, 'Available')
INTO AIRPLANE VALUES ('ALP07', 'BOEING', 'B301', 350, 20, 30, 300, 'Available')
INTO AIRPLANE VALUES ('ALP08', 'BOEING', 'B302', 375, 35, 40, 300, 'Available')
INTO AIRPLANE VALUES ('ALP09', 'AIRBUS', 'A300', 210, 10, 20, 180, 'Maintenance')
INTO AIRPLANE VALUES ('ALP10', 'AIRBUS', 'A321', 202, 20, 20, 162, 'Maintenance')
SELECT * FROM dual;

INSERT ALL
INTO PASSENGER VALUES ('PS0001', NULL, 'Somchai', 'Wongsawang', TO_DATE('01-01-1996', 'DD-MM-YYYY'), '080-785-6359')
INTO PASSENGER VALUES ('PS0002', 1112345678544, 'Teera', 'Bangna ', TO_DATE('04-02-1998', 'DD-MM-YYYY'), '083-496-1028')
INTO PASSENGER VALUES ('PS0003', 1234445678200, 'Somsri', 'Pongchai', TO_DATE('10-03-2000', 'DD-MM-YYYY'), '096-364-1235')
INTO PASSENGER VALUES ('PS0004', 0012333678465, 'Ravipa', 'Wachira', TO_DATE('15-04-1995', 'DD-MM-YYYY'), '068-963-1305')
INTO PASSENGER VALUES ('PS0005', 0123456667428, 'Matalada', 'Chaisri', TO_DATE('18-07-2001', 'DD-MM-YYYY'), '064-652-1693')
INTO PASSENGER VALUES ('PS0006', 1010123456420, 'Jack', 'Deland', TO_DATE('23-07-2002', 'DD-MM-YYYY'), '090-350-6371')
INTO PASSENGER VALUES ('PS0007', 6543219999468, 'Robert', 'Carol', TO_DATE('27-08-1997', 'DD-MM-YYYY'), '060-347-9601')
INTO PASSENGER VALUES ('PS0008', 1398520105430, 'Matalada', 'Chaisri', TO_DATE('27-08-1997', 'DD-MM-YYYY'), '095-694-1039')
INTO PASSENGER VALUES ('PS0009', 3648201538013, 'Laure', 'Canet', TO_DATE('01-01-2001', 'DD-MM-YYYY'), '065-301-5233')
INTO PASSENGER VALUES ('PS0010', 3400561028294, 'Louis', 'Givran', TO_DATE('01-01-1996', 'DD-MM-YYYY'), '065-151-3024')
INTO PASSENGER VALUES ('PS0011', 1532018607002, 'Timothy', 'Dovin', TO_DATE('29-06-1973', 'DD-MM-YYYY'), '094-562-9347')
INTO PASSENGER VALUES ('PS0012', 1289506333461, 'Anne', 'Petition', TO_DATE('29-06-1973', 'DD-MM-YYYY'), '083-549-9301')
INTO PASSENGER VALUES ('PS0013', 1392064209015, 'Jack', 'Deland', TO_DATE('03-03-2004', 'DD-MM-YYYY'), '093-410-6302')
INTO PASSENGER VALUES ('PS0014', 3490586302973, 'Claudine', 'Solignac', TO_DATE('16-02-1997', 'DD-MM-YYYY'), '098-317-9301')
INTO PASSENGER VALUES ('PS0015', NULL, 'Florian', 'Burnet', TO_DATE('12-05-2001', 'DD-MM-YYYY'), '084-782-1830')
INTO PASSENGER VALUES ('PS0016', 1199303588486, 'Bendjy', 'Gobbo', TO_DATE('26-11-2000', 'DD-MM-YYYY'), '084-103-0074')
INTO PASSENGER VALUES ('PS0017', 4782310135499, 'Danyel', 'Cambon', TO_DATE('07-12-1999', 'DD-MM-YYYY'), '063-017-9985')
INTO PASSENGER VALUES ('PS0018', 6451321845122, 'Robert', 'Carol', TO_DATE('18-07-2001', 'DD-MM-YYYY'), '061-064-9300')
INTO PASSENGER VALUES ('PS0019', 6851039982321, 'Anne', 'Dubois', TO_DATE('19-07-1980', 'DD-MM-YYYY'), '090-613-1823')
INTO PASSENGER VALUES ('PS0020', 1329209539455, 'Joel', 'Delanchy', TO_DATE('04-02-1998', 'DD-MM-YYYY'), '098-431-9017')
SELECT * FROM dual;

INSERT ALL
INTO FLIGHT VALUES ('FL01', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB100', 'ALP01')
INTO FLIGHT VALUES ('FL02', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB101', 'ALP01')
INTO FLIGHT VALUES ('FL03', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB300', 'ALP03')
INTO FLIGHT VALUES ('FL04', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB400', 'ALP04')
INTO FLIGHT VALUES ('FL05', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB401', 'ALP04')
INTO FLIGHT VALUES ('FL06', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB500', 'ALP05')
INTO FLIGHT VALUES ('FL07', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB501', 'ALP05')
INTO FLIGHT VALUES ('FL08', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB600', 'ALP06')
INTO FLIGHT VALUES ('FL09', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB601', 'ALP06')
INTO FLIGHT VALUES ('FL10', TO_DATE('28-08-2023', 'DD-MM-YYYY'), 'AB800', 'ALP08')
INTO FLIGHT VALUES ('FL11', TO_DATE('29-08-2023', 'DD-MM-YYYY'), 'AB200', 'ALP02')
INTO FLIGHT VALUES ('FL12', TO_DATE('29-08-2023', 'DD-MM-YYYY'), 'AB301', 'ALP03')
INTO FLIGHT VALUES ('FL13', TO_DATE('29-08-2023', 'DD-MM-YYYY'), 'AB801', 'ALP08')
INTO FLIGHT VALUES ('FL14', TO_DATE('30-08-2023', 'DD-MM-YYYY'), 'AB201', 'ALP02')
INTO FLIGHT VALUES ('FL15', TO_DATE('30-08-2023', 'DD-MM-YYYY'), 'AB500', 'ALP05')
INTO FLIGHT VALUES ('FL16', TO_DATE('30-08-2023', 'DD-MM-YYYY'), 'AB501', 'ALP05')
INTO FLIGHT VALUES ('FL17', TO_DATE('30-08-2023', 'DD-MM-YYYY'), 'AB700', 'ALP07')
INTO FLIGHT VALUES ('FL18', TO_DATE('31-08-2023', 'DD-MM-YYYY'), 'AB200', 'ALP02')
INTO FLIGHT VALUES ('FL19', TO_DATE('31-08-2023', 'DD-MM-YYYY'), 'AB600', 'ALP06')
INTO FLIGHT VALUES ('FL20', TO_DATE('31-08-2023', 'DD-MM-YYYY'), 'AB601', 'ALP06')
INTO FLIGHT VALUES ('FL21', TO_DATE('31-08-2023', 'DD-MM-YYYY'), 'AB701', 'ALP07')
INTO FLIGHT VALUES ('FL22', TO_DATE('31-08-2023', 'DD-MM-YYYY'), 'AB800', 'ALP08')
INTO FLIGHT VALUES ('FL23', TO_DATE('01-09-2023', 'DD-MM-YYYY'), 'AB201', 'ALP02')
INTO FLIGHT VALUES ('FL24', TO_DATE('01-09-2023', 'DD-MM-YYYY'), 'AB300', 'ALP03')
INTO FLIGHT VALUES ('FL25', TO_DATE('01-09-2023', 'DD-MM-YYYY'), 'AB500', 'ALP05')
INTO FLIGHT VALUES ('FL26', TO_DATE('01-09-2023', 'DD-MM-YYYY'), 'AB501', 'ALP05')
INTO FLIGHT VALUES ('FL27', TO_DATE('01-09-2023', 'DD-MM-YYYY'), 'AB801', 'ALP08')
INTO FLIGHT VALUES ('FL28', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB100', 'ALP01')
INTO FLIGHT VALUES ('FL29', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB101', 'ALP01')
INTO FLIGHT VALUES ('FL30', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB200', 'ALP02')
INTO FLIGHT VALUES ('FL31', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB301', 'ALP03')
INTO FLIGHT VALUES ('FL32', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB400', 'ALP04')
INTO FLIGHT VALUES ('FL33', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB401', 'ALP04')
INTO FLIGHT VALUES ('FL34', TO_DATE('02-09-2023', 'DD-MM-YYYY'), 'AB700', 'ALP07')
INTO FLIGHT VALUES ('FL35', TO_DATE('03-09-2023', 'DD-MM-YYYY'), 'AB100', 'ALP01')
INTO FLIGHT VALUES ('FL36', TO_DATE('03-09-2023', 'DD-MM-YYYY'), 'AB101', 'ALP01')
INTO FLIGHT VALUES ('FL37', TO_DATE('03-09-2023', 'DD-MM-YYYY'), 'AB201', 'ALP02')
INTO FLIGHT VALUES ('FL38', TO_DATE('03-09-2023', 'DD-MM-YYYY'), 'AB400', 'ALP04')
INTO FLIGHT VALUES ('FL39', TO_DATE('03-09-2023', 'DD-MM-YYYY'), 'AB401', 'ALP04')
INTO FLIGHT VALUES ('FL40', TO_DATE('03-09-2023', 'DD-MM-YYYY'), 'AB701', 'ALP07')
SELECT * FROM dual;

INSERT ALL
INTO TICKET VALUES ('PS0001', 'FL01', 15279, '37D', 'Economy')
INTO TICKET VALUES ('PS0002', 'FL01', 68330, '19A', 'Business')
INTO TICKET VALUES ('PS0017', 'FL02', 8539, '43H', 'Economy')
INTO TICKET VALUES ('PS0004', 'FL04', 1242, '52G', 'Economy')
INTO TICKET VALUES ('PS0010', 'FL05', 2104, '18K', 'Business')
INTO TICKET VALUES ('PS0019', 'FL06', 3209, '3A', 'First')
INTO TICKET VALUES ('PS0013', 'FL07', 2543, '44B', 'Economy')
INTO TICKET VALUES ('PS0003', 'FL07', 1350, '31A', 'Economy')
INTO TICKET VALUES ('PS0015', 'FL07', 3054, '14B', 'Business')
INTO TICKET VALUES ('PS0008', 'FL08', 1744, '17A', 'Business')
INTO TICKET VALUES ('PS0009', 'FL09', 4229, '5A', 'Business')
INTO TICKET VALUES ('PS0016', 'FL10', 45305, '65', 'Economy')
INTO TICKET VALUES ('PS0010', 'FL11', 129480, '5B', 'First')
INTO TICKET VALUES ('PS0005', 'FL14', 35434, '32B', 'Business')
INTO TICKET VALUES ('PS0011', 'FL15', 4229, '20J', 'Economy')
INTO TICKET VALUES ('PS0020', 'FL16', 24305, '12K', 'Business')
INTO TICKET VALUES ('PS0012', 'FL17', 45399, '11J', 'Business')
INTO TICKET VALUES ('PS0018', 'FL18', 71302, '17A', 'First')
INTO TICKET VALUES ('PS0003', 'FL19', 64521, '3B', 'First')
INTO TICKET VALUES ('PS0014', 'FL20', 3204, '53K', 'Economy')
INTO TICKET VALUES ('PS0006', 'FL22', 43502, '53K', 'Economy')
INTO TICKET VALUES ('PS0017', 'FL23', 65324, '10J', 'Business')
INTO TICKET VALUES ('PS0008', 'FL24', 68734, '9A', 'Business')
INTO TICKET VALUES ('PS0001', 'FL25', 2517, '43B', 'Economy')
INTO TICKET VALUES ('PS0019', 'FL26', 4520, '13B', 'Business')
INTO TICKET VALUES ('PS0002', 'FL27', 93276, '21K', 'Business')
INTO TICKET VALUES ('PS0013', 'FL29', 9952, '66A', 'Economy')
INTO TICKET VALUES ('PS0006', 'FL30', 135519, '2A', 'First')
INTO TICKET VALUES ('PS0015', 'FL32', 1544, '58H', 'Economy')
INTO TICKET VALUES ('PS0004', 'FL33', 1943, '36A', 'Economy')
INTO TICKET VALUES ('PS0008', 'FL35', 35440, '8B', 'Business')
INTO TICKET VALUES ('PS0011', 'FL37', 59939, '1A', 'First')
INTO TICKET VALUES ('PS0007', 'FL38', 1200, '47G', 'Economy')
INTO TICKET VALUES ('PS0009', 'FL39', 935, '59D', 'Economy')
INTO TICKET VALUES ('PS0013', 'FL40', 112043, '5B', 'First')
SELECT * FROM dual;

COMMIT;














